<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
        
        <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon.ico">
        <link rel="stylesheet" type="text/css" href="assets/lib/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="assets/css/font/flaticon/flaticon.css">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link rel="stylesheet" type="text/css" href="assets/lib/slick/slick.css">
        <link rel="stylesheet" type="text/css" href="assets/lib/slick/slick-theme.css">
        <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
      
        
    <link rel="stylesheet" type="text/css" href="assets/css/loader.css">
    <link rel="stylesheet" type="text/css" href="assets/css/toast.css">

</head>
<body class="home02">

    <header class="header-content">
      <div class="header-top hidden-sm hidden-xs" id="header-top">
        <div class="container">
          <nav class="navbar navbar-inverse header-top__top">
            <div class="navbar-header"><a class="navbar-brand logo__link" ><img class="logo__image" src="assets/img/logo/Logo-header.png" alt="Logo Educef"></a></div>
            
            <form class="navbar-form navbar-left form-search" style="margin-left:30px">
              <div class="form-search__input-group">
                <input class="form-control form-search__input" type="text" placeholder="Search your course...">
                <div class="form-search__btn-group">
                  <button class="btn form-search__button" type="submit"><i class="glyph-icon flaticon-search form-search__icon"></i></button>
                </div>
              </div>
            </form>
        
            <div class="nav navbar-nav navbar-right nav-right--notlogin">
    
                   
                              <div class="nav-right__profile"><i class="glyph-icon flaticon-profile-2 nav-right__profile__icon"></i><span class="nav-right__profile__status"></span>
                              </div>
                            
    
            </div>
                   
            
           
            </div>
          </nav>
        </div>
      </div>
      <div class="bottom-header hidden-sm hidden-xs" id="scrollspy" data-spy="affix" data-offset-top="112">
        <div class="container">
          <div class="logo--menu"><a class="logo__link" ><img class="logo__image" src="assets/img/logo/Logo-header.png" alt="Logo Educef"></a></div>
          <nav class="menu-main">
                <ul class="nav navbar-nav menu-main__list ">
                  <li class="menu-main__item active"><a class="menu-main__link " onclick="check()" id="home">home</a>
                  </li>
                  <li class="menu-main__item "><a class="menu-main__link " href="#" id="course">Departments</a>
                    <div class="dropdown-catagories dropdown-catagories--menu">
                      <ul class="dropdown-catagories__list">
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="computerengineering.html">Computer Engineering</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="computerscience.html">Computer Science</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="softwareengineering.html">Software Engineering</a></li>
                      </ul>
                    </div>
                  </li>
                  <li class="menu-main__item "><a class="menu-main__link " href="#" id="bundle">Other Info</a>
                    <div class="dropdown-catagories dropdown-catagories--menu">
                      <ul class="dropdown-catagories__list">
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="feestructure.html">Fee Structure</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="coming-soon.html">Coming Soon</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="scholarships.html">Scholarships</a></li>
                      </ul>
                    </div>
                  </li>
                  <li class="menu-main__item "><a class="menu-main__link " href="contact.html" id="partner">Contact Us</a> </li>
                  <li class="menu-main__item "><a class="menu-main__link " href="aboutus.html" id="blog">About Us</a> </li>
                </ul>
          </nav>
        </div>
      </div>
      <div class="header__mobile hidden-lg hidden-md">
        <div class="header-top">
          <div class="container">
    
    
                <form class="navbar-form navbar-left form-search" style="margin-left:30px">
                        <div class="form-search__input-group">
                          <input class="form-control form-search__input" type="text" placeholder="Search your course...">
                          <div class="form-search__btn-group">
                            <button class="btn form-search__button" type="submit"><i class="glyph-icon flaticon-search form-search__icon"></i></button>
                          </div>
                        </div>
                </form>
    
            <div class="nav-right--notlogin nav-right--notlogin--mobile pull-right">
             
                    <div class="nav-right__profile"><i class="glyph-icon flaticon-profile-2 nav-right__profile__icon"></i><span class="nav-right__profile__status"></span> </div>
                    
             
            </div>
            <form class="navbar-form form-search--mobile" id="form-search-mobile">
              <div class="container">
                <div class="form-search__input-group">
                  <input class="form-control form-search__input" type="text" placeholder="Search your course...">
                  <div class="form-search__btn-group">
                    <button class="btn form-search__button" type="submit"><i class="glyph-icon flaticon-search form-search__icon"></i></button>
                  </div>
                </div>
                <button class="dropdown-toggle form-search__button form-search__button--close" type="submit" data-toggle="collapse" data-target="#form-search-mobile"><i class="glyph-icon flaticon-access-denied form-search__icon"></i></button>
              </div>
            </form>
          </div>
        </div>
        <nav class="navbar" id="header-mobile" data-spy="affix" data-offset-top="75">
          <div class="container">
            <div class="categories--mobile pull-left"></div>
            <button class="navbar-toggle nav-icon pull-right collapsed visible-sm visible-xs" id="menu-hamberger" data-toggle="collapse" data-target="#menu-main"><span class="bar"></span></button>
            <div class="logo--mobile text-center"><a class="logo__link" href="http://swlabs.co/"><img class="logo__image" src="assets/img/logo/Logo-header.png" alt="Logo Educef"></a></div>
          </div>
          <div class="menu-mobile">
                <ul class="menu-mobile__list ">
                  <li class="menu-mobile__item"><a class="menu-mobile__link" onclick="check1()">home</a><span class="dropdown-toggle glyph-icon flaticon-arrows-3 menu-mobile__icon" data-toggle="dropdown" onClick="void(0)"></span>
                   
                  </li>
                  <li class="menu-mobile__item"><a class="menu-mobile__link" href="#">Departments</a><span class="dropdown-toggle glyph-icon flaticon-arrows-3 menu-mobile__icon" data-toggle="dropdown" onClick="void(0)"></span>
                    <ul class="dropdown-menu dropdown-mobile">
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="computerengineering.html">Computer Engineering</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="computerscience.html">Computer Science</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="softwareengineering.html">Software Engineering</a></li>
                     
                    </ul>
                  </li>
                  <li class="menu-mobile__item"><a class="menu-mobile__link" href="#">Other Info</a><span class="dropdown-toggle glyph-icon flaticon-arrows-3 menu-mobile__icon" data-toggle="dropdown" onClick="void(0)"></span>
                    <ul class="dropdown-menu dropdown-mobile">
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="feestructure.html">Fees Structure</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="coming-soon.html">Coming Soon</a></li>
                        <li class="dropdown-catagories__item "><a class="dropdown-catagories__link dropdown-catagories__link--full" href="scholarships.html">Scholarships</a></li>
                        </ul>
                  </li>
                  <li class="menu-mobile__item"><a class="menu-mobile__link" href="contact.html">Contact Us</a><span class="dropdown-toggle glyph-icon flaticon-arrows-3 menu-mobile__icon" data-toggle="dropdown" onClick="void(0)"></span>
                  </li>
                  <li class="menu-mobile__item"><a class="menu-mobile__link" href="aboutus.html">About Us</a><span class="dropdown-toggle glyph-icon flaticon-arrows-3 menu-mobile__icon" data-toggle="dropdown" onClick="void(0)"></span>
                  </li>
                </ul>
          </div>
        </nav>
      </div>
      <div class="button-default btn-ontop" id="on-top"><span class="glyph-icon flaticon-arrows-5"></span></div>
    </header>
    <!--Ending header-->    

<div style="text-align: center; min-height: 300px; margin: 10px" id="details2" hidden><p style="color:black"><b>Attendance Submitted Successfully</b> </p></div>
<div style="text-align: center; min-height: 300px; margin: 10px" id="details3" hidden><p style="color:black"><b>Your Attendance has Already Submitted</b> </p></div>

<p style="text-align: center" ><button  id="front" onclick="Front()" style="width: 150px; height:40px; margin:10px; background:rgb(7 , 215 , 155) "  class="btn btn-success"> back Camera </button></p>


<div id="cam" style="text-align: center;">
    <video style="border : 3px solid rgb(7 , 215 , 155); width:50% !important;  height:50% !important; " id="preview">
    </video>
</div>

<div  id="info" style="text-align: center" hidden>
    <p id="details" style="display: inline-block; color:black;  padding:5px; border-radius:10px; border:2px solid rgb(7 , 215 , 155); min-height:150px;" ></p>
    <br/>
    <button style="background:rgb(7 , 255 , 155);  width:170px;  color: black ; margin:5px; padding:5px" onclick="submit()" class="btn btn-success"> <b>Submit Attendance</b> </button>
  </div>


<div  style="height: 300px !important ; " id="includedFooter"></div>
<div id="Toast"></div>
</body>


<script src="instascan.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
<script src='firebase.js'></script>
<script src="assets/js/toast.js"></script>
<script src="assets/lib/js/jquery-3.3.1.min.js"></script>
<script src="assets/lib/js/bootstrap.min.js"></script>
<script src="assets/lib/slick/slick.min.js"></script>
<script src="assets/js/wow.js"></script>
<script src="assets/js/jquery-matchHeight.js"></script>
<script src="assets/js/slicks.js"></script>
<script src="assets/js/script.js"></script>
<script src="head&foot.js"></script>

<script>
    function  check(){
     var acctype = localStorage.getItem('type');
     if(acctype == 'principal'){
       window.location.replace('adminAfterLogin.html');
    } else if(acctype == 'student'){
       window.location.replace('studentafterlogin.html');
    } else if(acctype == 'teacher'){
       window.location.replace('teacherAfterLogin.html');
    } else{
     window.location.replace('index.html');
    }
   }

   function  check1(){
     var acctype = localStorage.getItem('type');
     if(acctype == 'principal'){
       window.location.replace('adminAfterLogin.html');
    } else if(acctype == 'student'){
       window.location.replace('studentafterlogin.html');
    } else if(acctype == 'teacher'){
       window.location.replace('teacherAfterLogin.html');
    } else{
     window.location.replace('index.html');
    }
   }
   
   </script>

<script>
  var tname , tdate , tcourse , tdept ,temail ;

let scanner = new Instascan.Scanner(
{
video: document.getElementById('preview')
}
);

scanner.addListener('scan', function(content){
   
var detail = '';
detail = content ;

tname = detail.substring(detail.indexOf("%"), 0);
tcourse = detail.substring(detail.indexOf("$"), detail.indexOf("%")+1);
temail = detail.substring(detail.indexOf("*"), detail.indexOf("$")+1);
tdate = detail.substring(detail.length, detail.indexOf("*")+1);

document.getElementById('details').innerHTML = '<p> Details <hr/> Teacher Name : '+tname +'<br/> Course : ' + tcourse + 
                                               '<br/> Date : ' + tdate + ' <br/> Student Name : ' +localStorage.getItem('sname')
                                              +'<br/> Student Roll : '+localStorage.getItem('sroll');  

document.getElementById('cam').hidden=true;
document.getElementById('info').removeAttribute('hidden');

});
Instascan.Camera.getCameras().then(cameras=>
{
  if(cameras.length > 0){
        scanner.start(cameras[0]);
    }else{
        showToast('no camera found');
    }
});


function Front(){
    Instascan.Camera.getCameras().then(cameras1=>
{
  if(cameras1.length > 0){
      scanner.start(cameras1[1]);
    }else{
      showToast('no camera found');
    }
});
}

function submit(){

var chek = `${tdate}(${localStorage.getItem('myid')})`

  firebase.database().ref('Attendance').orderByChild("check").equalTo(chek).once("value",snapshot => {
    if (snapshot.exists()){
    
      document.getElementById('info').hidden=true;
      document.getElementById('details3').removeAttribute("hidden");
    
    }

 else{
    
  var skey =firebase.database().ref('Attendance').push();

  var a = localStorage.getItem('sbatch');
  var b = localStorage.getItem('sroll');
  var c ;

  var stdepart = localStorage.getItem('sdept');

  if(stdepart.includes('Software-Engineering')){
    c="SE"
  }else if(stdepart.includes('Computer-Engineering')){
    c="CE"
   }else if(stdepart.includes('Computer-Science')){
    c="CS"
  }

  var scomp =`${a}-${c}-${b}`;
  
   var attendobj = {

    id            : skey.key ,
    check         : chek ,
    studentId     : localStorage.getItem('myid'),
    studentName   : localStorage.getItem('sname'),
    studentRoll   : localStorage.getItem('sroll'),
    studentSec    : localStorage.getItem('ssec'),
    studentDepart : localStorage.getItem('sdept'),
    studentBatch  : localStorage.getItem('sbatch'),
    studentSem    : localStorage.getItem('ssem') , 
    completeRoll  : scomp ,  
    teacherName   : tname ,
    course        : tcourse ,
    teacherEmail  : temail ,
    date          : tdate   

 }

skey.set(attendobj);

document.getElementById('info').hidden=true;
document.getElementById('details2').removeAttribute("hidden");

}

})

}
</script>
</html>